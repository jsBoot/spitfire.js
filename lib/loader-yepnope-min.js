/*
 <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a>.
 @copyright All rights reserved <a href="http://www.webitup.fr">? Web It Up</a>
 @name https://github.com/jsBoot/spitfire.js/blob/master/src/loader.js#52-3657ff5469197138e12e590799bc63fccad52efb
*/
(function(f,d,q){function o(a){return!a||a=="loaded"||a=="complete"||a=="uninitialized"}function p(){var a=r.shift();s=1;a?a.t?n(function(){(a.t=="c"?j.injectCss:j.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),p()):s=0}function c(a,c,e,k,b,I,h){function z(g){if(!A&&o(i.readyState)&&(f.r=A=1,!s&&p(),i.onload=i.onreadystatechange=null,g)){a!="img"&&n(function(){B.removeChild(i)},50);for(var e in l[c])if(l[c].hasOwnProperty(e))l[c][e].onload()}}var h=h||j.errorTimeout,i=d.createElement(a),A=0,w=0,f={t:e,s:c,
e:b,a:I,x:h};l[c]===1&&(w=1,l[c]=[]);a=="object"?i.data=c:(i.src=c,i.type=a);i.width=i.height="0";i.onerror=i.onload=i.onreadystatechange=function(){z.call(this,w)};r.splice(k,0,f);a!="img"&&(w||l[c]===2?(B.insertBefore(i,C?null:m),n(z,h)):l[c].push(i))}function e(a,e,k,b,d){s=0;e=e||"j";t(a)?c(e=="c"?J:D,a,e,this.i++,k,b,d):(r.splice(this.i++,0,a),r.length==1&&p());return this}function k(){var a=j;a.loader={load:e,i:0};return a}var b=d.documentElement,n=f.setTimeout,m=d.getElementsByTagName("script")[0],
x={}.toString,r=[],s=0,u=function(){},E="MozAppearance"in b.style,C=E&&!!d.createRange().compareNode,B=C?b:m.parentNode,b=f.opera&&x.call(f.opera)=="[object Opera]",b=!!d.attachEvent&&!b,D=E?"object":b?"script":"img",J=b?"script":D,F=Array.isArray||function(a){return x.call(a)=="[object Array]"},t=function(a){return typeof a=="string"},v=function(a){return x.call(a)=="[object Function]"},y=[],l={},G={timeout:function(a,c){c.length&&(a.timeout=c[0]);return a}},H,j;j=function(a){function c(a){var a=
a.split("!"),e=y.length,b=a.pop(),d=a.length,b={url:b,origUrl:b,prefixes:a},k,g,f;for(g=0;g<d;g++)f=a[g].split("="),(k=G[f.shift()])&&(b=k(b,f));for(g=0;g<e;g++)b=y[g](b);return b}function e(a,b,d,f,h){var g=c(a),m=g.autoCallback;g.url.split(".").pop().split("?").shift();if(!g.bypass)if(b&&(b=v(b)?b:b[a]||b[f]||b[a.split("/").pop().split("?")[0]]),g.instead)return g.instead(a,b,d,f,h);else l[g.url]?g.noexec=true:l[g.url]=1,d.load(g.url,g.forceCSS||!g.forceJS&&"css"==g.url.split(".").pop().split("?").shift()?
"c":q,g.noexec,g.attrs,g.timeout),(v(b)||v(m))&&d.load(function(){k();b&&b(g.origUrl,h,f);m&&m(g.origUrl,h,f);l[g.url]=2})}function b(a,c){function d(a,b){if(a)if(t(a))b||(g=function(){var a=[].slice.call(arguments);h.apply(this,a);m()}),e(a,g,c,0,f);else{if(Object(a)===a)for(j in n=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(j)&&(!b&&!--n&&(v(g)?g=function(){var a=[].slice.call(arguments);h.apply(this,a);m()}:g[j]=function(a){return function(){var b=[].slice.call(arguments);
a&&a.apply(this,b);m()}}(h[j])),e(a[j],g,c,j,f))}else!b&&m()}var f=!!a.test,k=a.load||a.both,g=a.callback||u,h=g,m=a.complete||u,n,j;d(f?a.yep:a.nope,!!k);k&&d(k)}var d,f,h=this.yepnope.loader;if(t(a))e(a,0,h,0);else if(F(a))for(d=0;d<a.length;d++)f=a[d],t(f)?e(f,0,h,0):F(f)?j(f):Object(f)===f&&b(f,h);else Object(a)===a&&b(a,h)};j.addPrefix=function(a,b){G[a]=b};j.addFilter=function(a){y.push(a)};j.errorTimeout=1E4;if(d.readyState==null&&d.addEventListener)d.readyState="loading",d.addEventListener("DOMContentLoaded",
H=function(){d.removeEventListener("DOMContentLoaded",H,0);d.readyState="complete"},0);f.yepnope=k();f.yepnope.executeStack=p;f.yepnope.injectJs=function(a,b,c,e,f,k){var h=d.createElement("script"),l,i,e=e||j.errorTimeout;h.src=a;for(i in c)h.setAttribute(i,c[i]);b=k?p:b||u;h.onreadystatechange=h.onload=function(){if(!l&&o(h.readyState))l=1,b(),h.onload=h.onreadystatechange=null};n(function(){l||(l=1,b(1))},e);f?h.onload():m.parentNode.insertBefore(h,m)};f.yepnope.injectCss=function(a,b,c,e,f,k){var e=
d.createElement("link"),h,b=k?p:b||u;e.href=a;e.rel="stylesheet";e.type="text/css";for(h in c)e.setAttribute(h,c[h]);f||(m.parentNode.insertBefore(e,m),n(b,0))}})(this,document);
(function(){var f;typeof head!="undefined"&&(f=function(){return function(c,e){c.push(e);return head.js.apply(head.js,c)}});typeof YUI!="undefined"&&(f=function(){var c;YUI().use("get",function(e){c=e});c.Get.options.async=true;return function(){c.Get.js.apply(c.Get,arguments)}});typeof yepnope!="undefined"&&(f=function(){return function(c,e){var f=c[c.length-1];yepnope({load:c,callback:function(b){f==b&&e()}})}});typeof requirejs!="undefined"&&(f=function(){return function(c,e){requirejs(c,e)}});
var d;typeof $LAB!="undefined"&&(d=function(){var c=$LAB.sandbox();this.script=function(e){c=c.script(e);return this};this.wait=function(e){c=e?c.wait(e):c.wait();return this}});d||(d=function(){var c=null,e=[],d=false,b=f(),n=function(){if(!d&&(d=e.shift()))if(d.uris.length)b(d.uris,function(b){var c=d.callback;d=false;c&&c(b);n()});else{var c=d.callback;d=false;c&&c();n()}};this.script=function(b){c&&clearTimeout(c);e.length||e.push({uris:[],callback:false});e[e.length-1].uris.push(b);c=setTimeout(n,
1);return this};this.wait=function(b){var c=e.length?e[e.length-1]:false;d&&(c=d);if(!c)return b&&b(),this;c.callback?e.push({uris:[],callback:b}):(c.callback=b,e.push({uris:[],callback:false}));return this}});d.prototype.fork=function(){return new d};d.prototype.base=function(c){for(var e=document.getElementsByTagName("script"),d,c=RegExp(c),b=0,f;b<e.length;f=e[b].getAttribute("src"),b++)if(f&&c.test(f)){d=f.split("/");d.pop();d=d.join("/");break}return d};var q=1,o=null;d.prototype.style=function(c,
e){var d=document.getElementsByTagName("head")[0],b=document.createElement("link");b.setAttribute("type","text/css");b.setAttribute("rel","stylesheet");b.setAttribute("data-spitfire-index",q);e&&b.setAttribute("media",e);b.setAttribute("href",c);if(!o)o=d.lastChild;!o||!o.nextSibling?d.appendChild(b):d.insertBefore(b,o.nextSibling);o=b;q++};var p=typeof define==="function"&&define.amd;if(p||typeof exports=="object"&&exports)p&&define("Spitfire/loader",new d);else{if(!("Spitfire"in this))this.Spitfire=
{};this.Spitfire.loader=new d}}).apply(this);
