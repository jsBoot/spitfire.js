!function(window,doc,undef){function isFileReady(readyState){return!readyState||"loaded"==readyState||"complete"==readyState||"uninitialized"==readyState}function injectJs(src,cb,attrs,timeout,err,internal){var done,i,script=doc.createElement("script");timeout=timeout||yepnope.errorTimeout,script.src=src;for(i in attrs)script.setAttribute(i,attrs[i]);cb=internal?executeStack:cb||noop,script.onreadystatechange=script.onload=function(){!done&&isFileReady(script.readyState)&&(done=1,cb(),script.onload=script.onreadystatechange=null)},sTimeout(function(){done||(done=1,cb(1))},timeout),err?script.onload():firstScript.parentNode.insertBefore(script,firstScript)}function injectCss(href,cb,attrs,timeout,err,internal){var i,link=doc.createElement("link");timeout=timeout||yepnope.errorTimeout,cb=internal?executeStack:cb||noop,link.href=href,link.rel="stylesheet",link.type="text/css";for(i in attrs)link.setAttribute(i,attrs[i]);err||(firstScript.parentNode.insertBefore(link,firstScript),sTimeout(cb,0))}function executeStack(){var i=execStack.shift();started=1,i?i.t?sTimeout(function(){("c"==i.t?yepnope.injectCss:yepnope.injectJs)(i.s,0,i.a,i.x,i.e,1)},0):(i(),executeStack()):started=0}function preloadFile(elem,url,type,splicePoint,dontExec,attrObj,timeout){function onload(first){if(!done&&isFileReady(preloadElem.readyState)&&(stackObject.r=done=1,!started&&executeStack(),preloadElem.onload=preloadElem.onreadystatechange=null,first)){"img"!=elem&&sTimeout(function(){insBeforeObj.removeChild(preloadElem)},50);for(var i in scriptCache[url])scriptCache[url].hasOwnProperty(i)&&scriptCache[url][i].onload()}}timeout=timeout||yepnope.errorTimeout;var preloadElem=doc.createElement(elem),done=0,firstFlag=0,stackObject={t:type,s:url,e:dontExec,a:attrObj,x:timeout};1===scriptCache[url]&&(firstFlag=1,scriptCache[url]=[]),"object"==elem?preloadElem.data=url:(preloadElem.src=url,preloadElem.type=elem),preloadElem.width=preloadElem.height="0",preloadElem.onerror=preloadElem.onload=preloadElem.onreadystatechange=function(){onload.call(this,firstFlag)},execStack.splice(splicePoint,0,stackObject),"img"!=elem&&(firstFlag||2===scriptCache[url]?(insBeforeObj.insertBefore(preloadElem,isGeckoLTE18?null:firstScript),sTimeout(onload,timeout)):scriptCache[url].push(preloadElem))}function load(resource,type,dontExec,attrObj,timeout){return started=0,type=type||"j",isString(resource)?preloadFile("c"==type?strCssElem:strJsElem,resource,type,this.i++,dontExec,attrObj,timeout):(execStack.splice(this.i++,0,resource),1==execStack.length&&executeStack()),this}function getYepnope(){var y=yepnope;return y.loader={load:load,i:0},y}var handler,yepnope,docElement=doc.documentElement,sTimeout=window.setTimeout,firstScript=doc.getElementsByTagName("script")[0],toString={}.toString,execStack=[],started=0,noop=function(){},isGecko="MozAppearance"in docElement.style,isGeckoLTE18=isGecko&&!!doc.createRange().compareNode,insBeforeObj=isGeckoLTE18?docElement:firstScript.parentNode,isOpera=window.opera&&"[object Opera]"==toString.call(window.opera),isIE=!!doc.attachEvent&&!isOpera,strJsElem=isGecko?"object":isIE?"script":"img",strCssElem=isIE?"script":strJsElem,isArray=Array.isArray||function(obj){return"[object Array]"==toString.call(obj)},isObject=function(obj){return Object(obj)===obj},isString=function(s){return"string"==typeof s},isFunction=function(fn){return"[object Function]"==toString.call(fn)},globalFilters=[],scriptCache={},prefixes={timeout:function(resourceObj,prefix_parts){return prefix_parts.length&&(resourceObj.timeout=prefix_parts[0]),resourceObj}};yepnope=function(needs){function satisfyPrefixes(url){var mFunc,j,prefix_parts,parts=url.split("!"),gLen=globalFilters.length,origUrl=parts.pop(),pLen=parts.length,res={url:origUrl,origUrl:origUrl,prefixes:parts};for(j=0;pLen>j;j++)prefix_parts=parts[j].split("="),mFunc=prefixes[prefix_parts.shift()],mFunc&&(res=mFunc(res,prefix_parts));for(j=0;gLen>j;j++)res=globalFilters[j](res);return res}function getExtension(url){return url.split(".").pop().split("?").shift()}function loadScriptOrStyle(input,callback,chain,index,testResult){{var resource=satisfyPrefixes(input),autoCallback=resource.autoCallback;getExtension(resource.url)}if(!resource.bypass)return callback&&(callback=isFunction(callback)?callback:callback[input]||callback[index]||callback[input.split("/").pop().split("?")[0]]),resource.instead?resource.instead(input,callback,chain,index,testResult):(scriptCache[resource.url]?resource.noexec=!0:scriptCache[resource.url]=1,chain.load(resource.url,resource.forceCSS||!resource.forceJS&&"css"==getExtension(resource.url)?"c":undef,resource.noexec,resource.attrs,resource.timeout),(isFunction(callback)||isFunction(autoCallback))&&chain.load(function(){getYepnope(),callback&&callback(resource.origUrl,testResult,index),autoCallback&&autoCallback(resource.origUrl,testResult,index),scriptCache[resource.url]=2}),void 0)}function loadFromTestObject(testObject,chain){function handleGroup(needGroup,moreToCome){if(needGroup){if(isString(needGroup))moreToCome||(callback=function(){var args=[].slice.call(arguments);cbRef.apply(this,args),complete()}),loadScriptOrStyle(needGroup,callback,chain,0,testResult);else if(isObject(needGroup)){needGroupSize=function(){var i,count=0;for(i in needGroup)needGroup.hasOwnProperty(i)&&count++;return count}();for(callbackKey in needGroup)needGroup.hasOwnProperty(callbackKey)&&(moreToCome||--needGroupSize||(isFunction(callback)?callback=function(){var args=[].slice.call(arguments);cbRef.apply(this,args),complete()}:callback[callbackKey]=function(innerCb){return function(){var args=[].slice.call(arguments);innerCb&&innerCb.apply(this,args),complete()}}(cbRef[callbackKey])),loadScriptOrStyle(needGroup[callbackKey],callback,chain,callbackKey,testResult))}}else!moreToCome&&complete()}var needGroupSize,callbackKey,testResult=!!testObject.test,group=testResult?testObject.yep:testObject.nope,always=testObject.load||testObject.both,callback=testObject.callback||noop,cbRef=callback,complete=testObject.complete||noop;handleGroup(group,!!always),always&&handleGroup(always)}var i,need,chain=this.yepnope.loader;if(isString(needs))loadScriptOrStyle(needs,0,chain,0);else if(isArray(needs))for(i=0;i<needs.length;i++)need=needs[i],isString(need)?loadScriptOrStyle(need,0,chain,0):isArray(need)?yepnope(need):isObject(need)&&loadFromTestObject(need,chain);else isObject(needs)&&loadFromTestObject(needs,chain)},yepnope.addPrefix=function(prefix,callback){prefixes[prefix]=callback},yepnope.addFilter=function(filter){globalFilters.push(filter)},yepnope.errorTimeout=1e4,null==doc.readyState&&doc.addEventListener&&(doc.readyState="loading",doc.addEventListener("DOMContentLoaded",handler=function(){doc.removeEventListener("DOMContentLoaded",handler,0),doc.readyState="complete"},0)),window.yepnope=getYepnope(),window.yepnope.executeStack=executeStack,window.yepnope.injectJs=injectJs,window.yepnope.injectCss=injectCss}(this,document),function(){"use strict";var backend;"undefined"!=typeof head&&(backend=function(){return function(uris,callback){return uris.push(callback),head.js.apply(head.js,uris)}}),"undefined"!=typeof YUI&&(backend=function(){var Y;return YUI().use("get",function(o){Y=o,Y.Get.options.async=!0}),function(){Y.Get.js.apply(Y.Get,arguments)}}),"undefined"!=typeof yepnope&&(backend=function(){return function(uris,callback){var stamp=uris[uris.length-1];yepnope({load:uris,callback:function(url){stamp==url&&callback()}})}}),"undefined"!=typeof requirejs&&(backend=function(){return function(uris,callback){requirejs(uris,callback)}});var PvLoader;"undefined"!=typeof $LAB&&(PvLoader=function(){var q=$LAB.sandbox();this.script=function(uri){return q=q.script(uri),this},this.wait=function(cbk){return q=cbk?q.wait(cbk):q.wait(),this}}),PvLoader||(PvLoader=function(){var linger=null,toLoad=[],currentLoading=!1,bck=backend(),lingerEnd=function(){if(!currentLoading&&(currentLoading=toLoad.shift())){if(!currentLoading.uris.length){var cl=currentLoading.callback;return currentLoading=!1,cl&&cl(),lingerEnd(),void 0}bck(currentLoading.uris,function(err){var cl=currentLoading.callback;currentLoading=!1,cl&&cl(err),lingerEnd()})}};this.script=function(uri){return linger&&clearTimeout(linger),toLoad.length||toLoad.push({uris:[],callback:!1}),toLoad[toLoad.length-1].uris.push(uri),linger=setTimeout(lingerEnd,1),this},this.wait=function(callback){var me=toLoad.length?toLoad[toLoad.length-1]:!1;return currentLoading&&(me=currentLoading),me?(me.callback?toLoad.push({uris:[],callback:callback}):(me.callback=callback,toLoad.push({uris:[],callback:!1})),this):(callback&&callback(),this)}}),PvLoader.prototype.fork=function(){return new PvLoader},PvLoader.prototype.base=function(pattern){for(var m,it,c=document.getElementsByTagName("script"),re=new RegExp(pattern),x=0;x<c.length;it=c[x].getAttribute("src"),x++)if(re.test(it)){m=it.split("/"),m.pop(),m=m.join("/")||".";break}return m||null};var idx=1,hook=null;PvLoader.prototype.style=function(url,media){var h=document.getElementsByTagName("head")[0],s=document.createElement("link");s.setAttribute("type","text/css"),s.setAttribute("rel","stylesheet"),s.setAttribute("data-spitfire-index",idx),media&&s.setAttribute("media",media),s.setAttribute("href",url),hook||(hook=h.lastChild),hook&&hook.nextSibling?h.insertBefore(s,hook.nextSibling):h.appendChild(s),hook=s,idx++};var isLoader="function"==typeof define&&define.amd,root="object"==typeof exports&&exports;isLoader||root?isLoader&&define("Spitfire/loader",new PvLoader):("Spitfire"in this||(this.Spitfire={}),this.Spitfire.loader=new PvLoader)}.apply(this);
//# sourceMappingURL=loader-yepnope.js.map