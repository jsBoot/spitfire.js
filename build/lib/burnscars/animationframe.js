!function(window){"use strict";function AnimationFrame(options){return this instanceof AnimationFrame?(options||(options={}),"number"==typeof options&&(options={frameRate:options}),null!=options.useNative||(options.useNative=!0),this.options=options,this.frameRate=options.frameRate||AnimationFrame.FRAME_RATE,this._frameLength=1e3/this.frameRate,this._isCustomFrameRate=this.frameRate!==AnimationFrame.FRAME_RATE,this._timeoutId=null,this._callbacks={},this._lastTickTime=0,this._tickCounter=0,void 0):new AnimationFrame(options)}var nativeRequestAnimationFrame,nativeCancelAnimationFrame,now=Date.now,setTimeout=window.setTimeout,hasNative=!1;!function(){var i,vendors=["ms","moz","webkit","o"];for(i=0;i<vendors.length&&!nativeRequestAnimationFrame;i++)nativeRequestAnimationFrame=top[vendors[i]+"RequestAnimationFrame"],nativeCancelAnimationFrame=top[vendors[i]+"CancelAnimationFrame"]||top[vendors[i]+"CancelRequestAnimationFrame"];nativeRequestAnimationFrame&&nativeRequestAnimationFrame(function(){hasNative=!0})}(),AnimationFrame.FRAME_RATE=60,AnimationFrame.shim=function(options){var animationFrame=new AnimationFrame(options);return window.requestAnimationFrame=function(callback){return animationFrame.request(callback)},window.cancelAnimationFrame=function(id){return animationFrame.cancel(id)},animationFrame},AnimationFrame.prototype.request=function(callback){var delay,self=this;if(++this._tickCounter,hasNative&&self.options.useNative&&!this._isCustomFrameRate)return nativeRequestAnimationFrame(callback);if(!callback)throw new TypeError("Not enough arguments");return null==this._timeoutId&&(delay=this._frameLength+this._lastTickTime-(now?now():(new Date).getTime()),0>delay&&(delay=0),this._timeoutId=setTimeout(function(){var id;self._lastTickTime=now?now():(new Date).getTime(),self._timeoutId=null,++self._tickCounter;for(id in self._callbacks)self._callbacks[id]&&(hasNative&&self.options.useNative?nativeRequestAnimationFrame(self._callbacks[id]):self._callbacks[id](self._lastTickTime),delete self._callbacks[id])},delay)),this._callbacks[this._tickCounter]=callback,this._tickCounter},AnimationFrame.prototype.cancel=function(id){hasNative&&this.options.useNative&&nativeCancelAnimationFrame(id),delete this._callbacks[id]},"object"==typeof exports&&"object"==typeof module?module.exports=AnimationFrame:"function"==typeof define&&define.amd?define(function(){return AnimationFrame}):window.AnimationFrame=AnimationFrame}(window),function(){"use strict";AnimationFrame.shim({})}();
//# sourceMappingURL=animationframe.js.map