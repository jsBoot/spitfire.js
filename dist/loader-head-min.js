/*
 <a href="http://en.wikipedia.org/wiki/MIT_License">MIT</a>.
 @copyright All rights reserved <a href="http://www.webitup.fr">copyright WebItUp <dev@webitup.fr> (http://www.webitup.fr/lab)</a>
 @name loader.js
 @location https://github.com/jsBoot/spitfire.js/blob/master/src/loader.js#114-c9d8e7426563d7cfb3f9030fb5eea7bc5f6994ad
*/
'use strict';(function(a,q){function d(a){y[y.length]=a}function g(a){u.className=u.className.replace(RegExp(" \\b"+a+"\\b"),"")}function h(a,b){for(var c=0,f=a.length;c<f;c++)b.call(a,a[c],c)}function t(){u.className=u.className.replace(/ (w-|eq-|gt-|gte-|lt-|lte-|portrait|no-portrait|landscape|no-landscape)\d+/g,"");var b=a.innerWidth||u.clientWidth,c=a.outerWidth||a.screen.width;p.screen.innerWidth=b;p.screen.outerWidth=c;d("w-"+b);h(k.screens,function(a){b>a?(k.screensCss.gt&&d("gt-"+a),k.screensCss.gte&&
d("gte-"+a)):b<a?(k.screensCss.lt&&d("lt-"+a),k.screensCss.lte&&d("lte-"+a)):b===a&&(k.screensCss.lte&&d("lte-"+a),k.screensCss.eq&&d("e-q"+a),k.screensCss.gte&&d("gte-"+a))});var c=a.innerHeight||u.clientHeight,f=a.outerHeight||a.screen.height;p.screen.innerHeight=c;p.screen.outerHeight=f;p.feature("portrait",c>b);p.feature("landscape",c<b)}function f(){a.clearTimeout(B);B=a.setTimeout(t,50)}var c=a.document,b=a.navigator,v=a.location,u=c.documentElement,y=[],k={screens:[240,320,480,640,768,800,
1024,1280,1440,1680,1920],screensCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!1},browsers:[{ie:{min:6,max:11}}],browserCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!0},section:"-section",page:"-page",head:"head"};if(a.head_conf)for(var l in a.head_conf)a.head_conf[l]!==q&&(k[l]=a.head_conf[l]);var p=a[k.head]=function(){p.ready.apply(null,arguments)};p.feature=function(a,b,c){if(!a)return u.className+=" "+y.join(" "),y=[],p;"[object Function]"===Object.prototype.toString.call(b)&&(b=b.call());d((b?"":"no-")+a);p[a]=!!b;
c||(g("no-"+a),g(a),p.feature());return p};p.feature("js",!0);l=b.userAgent.toLowerCase();b=/mobile|android|kindle|silk|midp|(windows nt 6\.2.+arm|touch)/.test(l);p.feature("mobile",b,!0);p.feature("desktop",!b,!0);l=/(chrome|firefox)[ \/]([\w.]+)/.exec(l)||/(iphone|ipad|ipod)(?:.*version)?[ \/]([\w.]+)/.exec(l)||/(android)(?:.*version)?[ \/]([\w.]+)/.exec(l)||/(webkit|opera)(?:.*version)?[ \/]([\w.]+)/.exec(l)||/(msie) ([\w.]+)/.exec(l)||[];b=l[1];l=parseFloat(l[2]);switch(b){case "msie":b="ie";
l=c.documentMode||l;break;case "firefox":b="ff";break;case "ipod":case "ipad":case "iphone":b="ios";break;case "webkit":b="safari"}p.browser={name:b,version:l};p.browser[b]=!0;for(var x=0,w=k.browsers.length;x<w;x++)for(var r in k.browsers[x])if(b===r){d(r);for(var n=k.browsers[x][r].max,s=k.browsers[x][r].min;s<=n;s++)l>s?(k.browserCss.gt&&d("gt-"+r+s),k.browserCss.gte&&d("gte-"+r+s)):l<s?(k.browserCss.lt&&d("lt-"+r+s),k.browserCss.lte&&d("lte-"+r+s)):l===s&&(k.browserCss.lte&&d("lte-"+r+s),k.browserCss.eq&&
d("eq-"+r+s),k.browserCss.gte&&d("gte-"+r+s))}else d("no-"+r);d(b);d(b+parseInt(l,10));"ie"===b&&9>l&&h("abbr article aside audio canvas details figcaption figure footer header hgroup main mark meter nav output progress section summary time video".split(" "),function(a){c.createElement(a)});h(v.pathname.split("/"),function(a,b){if(2<this.length&&this[b+1]!==q)b&&d(this.slice(b,b+1).join("-").toLowerCase()+k.section);else{var c=a||"index",f=c.indexOf(".");0<f&&(c=c.substring(0,f));u.id=c.toLowerCase()+
k.page;b||d("root"+k.section)}});p.screen={height:a.screen.height,width:a.screen.width};t();var B=0;a.addEventListener?a.addEventListener("resize",f,!1):a.attachEvent("onresize",f)})(window);
(function(a,q){function d(a){var b=a.charAt(0).toUpperCase()+a.substr(1),c;a:{a=(a+" "+f.join(b+" ")+b).split(" ");for(c in a)if(h[a[c]]!==q){c=!0;break a}c=!1}return!!c}var g=a.document.createElement("i"),h=g.style,t=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),f=["Webkit","Moz","O","ms","Khtml"],c=a[a.head_conf&&a.head_conf.head||"head"],b={gradient:function(){h.cssText=("background-image:"+t.join("gradient(linear,left top,right bottom,from(#9f9),to(#fff));background-image:")+t.join("linear-gradient(left top,#eee,#fff);background-image:")).slice(0,
-17);return!!h.backgroundImage},rgba:function(){h.cssText="background-color:rgba(0,0,0,0.5)";return!!h.backgroundColor},opacity:function(){return""===g.style.opacity},textshadow:function(){return""===h.textShadow},multiplebgs:function(){h.cssText="background:url(https://),url(https://),red url(https://)";var a=(h.background||"").match(/url/g);return"[object Array]"===Object.prototype.toString.call(a)&&3===a.length},boxshadow:function(){return d("boxShadow")},borderimage:function(){return d("borderImage")},
borderradius:function(){return d("borderRadius")},cssreflections:function(){return d("boxReflect")},csstransforms:function(){return d("transform")},csstransitions:function(){return d("transition")},touch:function(){return"ontouchstart"in a},retina:function(){return 1<a.devicePixelRatio},fontface:function(){var a=c.browser.version;switch(c.browser.name){case "ie":return 9<=a;case "chrome":return 13<=a;case "ff":return 6<=a;case "ios":return 5<=a;case "android":return!1;case "webkit":return 5.1<=a;
case "opera":return 10<=a;default:return!1}}},v;for(v in b)b[v]&&c.feature(v,b[v].call(),!0);c.feature()})(window);
(function(a,q){function d(){}function g(a,e){if(a){"object"===typeof a&&(a=[].slice.call(a));for(var b=0,c=a.length;b<c;b++)e.call(a,a[b],b)}}function h(a,e){var b=Object.prototype.toString.call(e).slice(8,-1);return e!==q&&null!==e&&b===a}function t(a){return h("Function",a)}function f(a){a=a||d;a._done||(a(),a._done=1)}function c(a){var e={};if("object"===typeof a)for(var b in a)a[b]&&(e={name:b,url:a[b]});else e=a.split("/"),e=e[e.length-1],b=e.indexOf("?"),e={name:-1!==b?e.substring(0,b):e,url:a};
return(a=C[e.name])&&a.url===e.url?a:C[e.name]=e}function b(a){a=a||C;for(var b in a)if(a.hasOwnProperty(b)&&a[b].state!==D)return!1;return!0}function v(a){a.state=L;g(a.onpreload,function(a){a.call()})}function u(a,b){a.state===q&&(a.state=H,a.onpreload=[],p({url:a.url,type:"cache"},function(){v(a)}))}function y(){var a=arguments,b=[].slice.call(a,1),f=b[0];if(!F)return B.push(function(){m.load.apply(null,a)}),m;f?(g(b,function(a){!t(a)&&a&&u(c(a))}),l(c(a[0]),t(f)?f:function(){m.load.apply(null,
b)})):l(c(a[0]));return m}function k(){var a=arguments,e=a[a.length-1],G={};t(e)||(e=null);g(a,function(d,k){d!==e&&(d=c(d),G[d.name]=d,l(d,e&&k===a.length-2?function(){b(G)&&f(e)}:null))});return m}function l(a,e){e=e||d;a.state===D?e():a.state===I?m.ready(a.name,e):a.state===H?a.onpreload.push(function(){l(a,e)}):(a.state=I,p(a,function(){a.state=D;e();g(A[a.name],function(a){f(a)});z&&b()&&g(A.ALL,function(a){f(a)})}))}function p(b,e){e=e||d;var c;/\.css[^\.]*$/.test(b.url)?(c=n.createElement("link"),
c.type="text/"+(b.type||"css"),c.rel="stylesheet",c.href=b.url):(c=n.createElement("script"),c.type="text/"+(b.type||"javascript"),c.src=b.url);c.onload=c.onreadystatechange=function(b){b=b||a.event;if("load"===b.type||/loaded|complete/.test(c.readyState)&&(!n.documentMode||9>n.documentMode))c.onload=c.onreadystatechange=c.onerror=null,e()};c.onerror=function(a){c.onload=c.onreadystatechange=c.onerror=null;e()};c.async=!1;c.defer=!1;var f=n.head||n.getElementsByTagName("head")[0];f.insertBefore(c,
f.lastChild)}function x(){for(var a=n.getElementsByTagName("script"),b=0,c=a.length;b<c;b++){var f=a[b].getAttribute("data-headjs-load");if(f){m.load(f);break}}}function w(){n.body?z||(z=!0,x(),g(s,function(a){f(a)})):(a.clearTimeout(m.readyTimeout),m.readyTimeout=a.setTimeout(w,50))}function r(){n.addEventListener?(n.removeEventListener("DOMContentLoaded",r,!1),w()):"complete"===n.readyState&&(n.detachEvent("onreadystatechange",r),w())}var n=a.document,s=[],B=[],A={},C={},K="async"in n.createElement("script")||
"MozAppearance"in n.documentElement.style||a.opera,F,z,J=a.head_conf&&a.head_conf.head||"head",m=a[J]=a[J]||function(){m.ready.apply(null,arguments)},H=1,L=2,I=3,D=4;if("complete"===n.readyState)w();else if(n.addEventListener)n.addEventListener("DOMContentLoaded",r,!1),a.addEventListener("load",w,!1);else{n.attachEvent("onreadystatechange",r);a.attachEvent("onload",w);var E=!1;try{E=!a.frameElement&&n.documentElement}catch(M){}E&&E.doScroll&&function e(){if(!z){try{E.doScroll("left")}catch(b){a.clearTimeout(m.readyTimeout);
m.readyTimeout=a.setTimeout(e,50);return}w()}}()}m.load=m.js=K?k:y;m.test=function(a,b,c,f){a="object"===typeof a?a:{test:a,success:b?h("Array",b)?b:[b]:!1,failure:c?h("Array",c)?c:[c]:!1,callback:f||d};(b=!!a.test)&&a.success?(a.success.push(a.callback),m.load.apply(null,a.success)):!b&&a.failure?(a.failure.push(a.callback),m.load.apply(null,a.failure)):f();return m};m.ready=function(a,c){if(a===n)return z?f(c):s.push(c),m;t(a)&&(c=a,a="ALL");if("string"!==typeof a||!t(c))return m;var d=C[a];if(d&&
d.state===D||"ALL"===a&&b()&&z)return f(c),m;(d=A[a])?d.push(c):A[a]=[c];return m};m.ready(n,function(){b()&&g(A.ALL,function(a){f(a)});m.feature&&m.feature("domloaded",!0)});setTimeout(function(){F=!0;g(B,function(a){a()})},300)})(window);
(function(){var a;"undefined"!=typeof head&&(a=function(){return function(a,c){a.push(c);return head.js.apply(head.js,a)}});"undefined"!=typeof YUI&&(a=function(){var a;YUI().use("get",function(c){a=c});a.Get.options.async=!0;return function(){a.Get.js.apply(a.Get,arguments)}});"undefined"!=typeof yepnope&&(a=function(){return function(a,c){var b=a[a.length-1];yepnope({load:a,callback:function(a){b==a&&c()}})}});"undefined"!=typeof requirejs&&(a=function(){return function(a,c){requirejs(a,c)}});var q;
"undefined"!=typeof $LAB&&(q=function(){var a=$LAB.sandbox();this.script=function(c){a=a.script(c);return this};this.wait=function(c){a=c?a.wait(c):a.wait();return this}});q||(q=function(){var d=null,c=[],b=!1,v=a(),g=function(){if(!b&&(b=c.shift()))if(b.uris.length)v(b.uris,function(a){var c=b.callback;b=!1;c&&c(a);g()});else{var a=b.callback;b=!1;a&&a();g()}};this.script=function(a){d&&clearTimeout(d);c.length||c.push({uris:[],callback:!1});c[c.length-1].uris.push(a);d=setTimeout(g,1);return this};
this.wait=function(a){var d=c.length?c[c.length-1]:!1;b&&(d=b);if(!d)return a&&a(),this;d.callback?c.push({uris:[],callback:a}):(d.callback=a,c.push({uris:[],callback:!1}));return this}});q.prototype.fork=function(){return new q};q.prototype.base=function(a){var c=document.getElementsByTagName("script"),b;a=RegExp(a);for(var d=0,g;d<c.length;g=c[d].getAttribute("src"),d++)if(g&&a.test(g)){b=g.split("/");b.pop();b=b.join("/")||"./";break}return b||null};var d=1,g=null;q.prototype.style=function(a,
c){var b=document.getElementsByTagName("head")[0],h=document.createElement("link");h.setAttribute("type","text/css");h.setAttribute("rel","stylesheet");h.setAttribute("data-spitfire-index",d);c&&h.setAttribute("media",c);h.setAttribute("href",a);g||(g=b.lastChild);g&&g.nextSibling?b.insertBefore(h,g.nextSibling):b.appendChild(h);g=h;d++};var h="function"===typeof define&&define.amd,t="object"==typeof exports&&exports;h||t?h&&define("Spitfire/loader",new q):("Spitfire"in this||(this.Spitfire={}),this.Spitfire.loader=
new q)}).apply(this);
